What is it?

Tool to simplify the automation of freesurfer using docker on a server

Functionalities

- Prepare dicom: given the "dicom_raw" folder, defined in settings, convert the folder in a usable structure and saves it in "dicom": 
    in a usable folder all the dicom folders are at the first level, 
    The default function works with second level dicom (each subjkect has multiple acquistions with multiple files), and saves a data structure in which 
    for each acquisition a new folder is created
    For other strutures it needs to be modified

- create_table: 
    creates a table with the subjects information. this step is needed for the rest of the processing
    as the code reads it every time
    the location is saved in the settings as table_location 
    the way it saves the subject name and the mri name also needs to be changed when needed. For now it combines the two first two levels after the dicom. the dicom foler becomes the mriname (which will be the nifti name)
    It also checks wether it is possible to run samseg and reconall

- convert dicom: converts the dicom folder in nifti, only T1, T2 or NIFTI, this can also be modified
    The results are saved in the folder named "nifti" and the origin is "dicom" in the settings
    source folder "dicom"
    destination folder "nifit"


- run recon all: 
    Recon all is run on the T1 present, only once per subject (or acquisition) 

    source folder "nifti"
    destination folder "reconall"

- registration 
    T2 and T1 are coregistered to run samseg. 

- samseg 
    Runs the samseg on T1 and T2

    source folder "dicom"
    destination folder "samseg"


Workflow example: 
    install softweare runnning install.sh
    set in settings the parameters and the substrings to to check for matching
    run prepare dicom on the raw folder (can also be external or tmp)
    create the table
    run convert nifti 
    run reconall 
        or 
    run registration 
    run samseg


settings
    T1
    T2
    NIFTI 
    no_T1
    no_T2
    no_NIFTI 



todo 
    - select the names on samseg
    - check that only one t1, t2 etc are converted to nifti from the table and in the rest
    - give the possibility to add category in scan types in settings 
    - develop edit settings also for that 
    - write tests? how do you write tests for code that has external effects
        - find a way to run tests more efficiently (now to test it you need to change the parameter)
    - optimitze table creation
    - make the table work with paths!! or not? what is better. fr the intermediate step, so that it does not need the prepare dirs anymore

